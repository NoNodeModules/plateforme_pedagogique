{% extends 'base.html.twig' %}

{% block title %}
    Student - {{ questionnaire.title }}
{% endblock %}

{% block home %}
    <a class="dropdown-item" href="{{ path('student_index') }}">Home <span class="sr-only">(current)</span></a>
{% endblock %}

{% block body %}
    <header>
        <h3>
            {{ questionnaire.title }}
            <span class="badge
            {% if questionnaire.difficulty == "difficile" %}
                badge-danger
            {% elseif questionnaire.difficulty ==  "facile" %}
                badge-success
            {% else %}
                badge-info
            {% endif %}
            ">{{ questionnaire.difficulty }}</span>
        </h3>
    </header>

    {% if finalResults['given'] is not null %}
        <div class="alert alert-primary">Votre score : {{ points }}/{{ questionnaire.totalScore }}</div>
    {% endif %}

    <form method="post">
        {% for question in questions %}
            <article class="container">
                <h5 class="pt-3 mb-0">{{ question.wording }}</h5>
                <small class="text-muted">{{ question.score }} {{ question.score > 1 ? "points" : "point" }}</small>

                <ul class="list-group">
                    {% for proposition in question.propositions %}

                        {% set lgi_class, checked = "", "" %}
                        {% if finalResults['given'] is not null and proposition.id in finalResults['given'] %}
                            {% set checked = "checked" %}
                            {% if proposition.id in finalResults['rights'] %}
                                {% set lgi_class = "correct" %}
                            {% else %}
                                {% set lgi_class = "wrong" %}
                            {% endif %}
                        {% endif %}

                        <li class="list-group-item {{ lgi_class }}">
                            <label>
                                <input type="radio" name="{{ question.id }}" value="{{ proposition.id }}" {{ checked }}>
                                {{ proposition.text }}
                            </label>
                        </li>
                    {% endfor %}
                </ul>
            </article>
        {% endfor %}

        <footer class="text-center mt-3">
            <button class="btn btn-primary" type="submit"><i class="fas fa-check"></i>&nbsp;Je valide mes r√©ponses
            </button>
        </footer>

    </form>
{% endblock %}
